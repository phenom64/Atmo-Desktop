message(STATUS "preparing kwin deco")
project(kwin3_styleproject)
file(GLOB KWIN_SRCS *.cpp)

if (QT5BUILD)
    message(STATUS "not yet kde5 deco")
else (QT5BUILD)
        find_file(KDECORATION_H kdecoration.h ${KDE4_INCLUDES})
    if (KDECORATION_H)
	message(STATUS "kwin deco header found: " ${KDECORATION_H})
        kde4_add_plugin(kwin3_styleproject ${KWIN_SRCS})
        target_link_libraries(kwin3_styleproject styleproject ${QT_LIBRARIES} ${KDE4_KDEUI_LIBS} kdecorations ${X11_LIBRARIES})
        install(TARGETS kwin3_styleproject DESTINATION ${PLUGIN_INSTALL_DIR})
        install(FILES styleproject.desktop DESTINATION ${DATA_INSTALL_DIR}/kwin)
    else (KDECORATION_H)
	message(WARNING "kwin deco header not found, not building deco even if you have kde4")
    endif (KDECORATION_H)
endif (QT5BUILD)
