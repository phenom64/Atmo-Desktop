message(STATUS "preparing kwin deco")
project(kwin3_styleproject)

if (NOT QT5BUILD)
    find_file(KDECORATION_H kdecoration.h ${KDE4_INCLUDES})
    if (KDECORATION_H)
	message(STATUS "kwin deco header found: " ${KDECORATION_H})
    else (KDECORATION_H)
	message(WARNING "kwin deco header not found, build will likely fail")
    endif (KDECORATION_H)
endif (NOT QT5BUILD)

file(GLOB KWIN_SRCS *.cpp)

if (QT5BUILD)
    message(STATUS "not yet kde5 deco")
else (QT5BUILD)
    kde4_add_plugin(kwin3_styleproject ${KWIN_SRCS})
    target_link_libraries(kwin3_styleproject styleproject styleproject_config_lib ${QT_LIBRARIES} ${KDE4_KDEUI_LIBS} kdecorations ${X11_LIBRARIES})
    install(TARGETS kwin3_styleproject DESTINATION ${PLUGIN_INSTALL_DIR})
    install(FILES styleproject.desktop DESTINATION ${DATA_INSTALL_DIR}/kwin)
endif (QT5BUILD)
